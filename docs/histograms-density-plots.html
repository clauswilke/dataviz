<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Fundamentals of data visualization</title>
  <meta name="description" content="A guide for making figures that look professional and are publication-ready.">
  <meta name="generator" content="bookdown 0.5.14 and GitBook 2.6.7">

  <meta property="og:title" content="Fundamentals of data visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A guide for making figures that look professional and are publication-ready." />
  <meta name="github-repo" content="clauswilke/dataviz" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Fundamentals of data visualization" />
  
  <meta name="twitter:description" content="A guide for making figures that look professional and are publication-ready." />
  

<meta name="author" content="Claus O. Wilke">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="directory-of-visualizations.html">
<link rel="next" href="ecdf-qq.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#thoughts-on-graphing-software-and-figure-preparation-pipelines"><i class="fa fa-check"></i>Thoughts on graphing software and figure-preparation pipelines</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#good-bad-and-ugly-figures"><i class="fa fa-check"></i>Good, bad, and ugly figures</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>Part I: From data to visualization</b></span></li>
<li class="chapter" data-level="1" data-path="visualizing-data-mapping-data-onto-aesthetics.html"><a href="visualizing-data-mapping-data-onto-aesthetics.html"><i class="fa fa-check"></i><b>1</b> Visualizing data: mapping data onto aesthetics</a><ul>
<li class="chapter" data-level="1.1" data-path="visualizing-data-mapping-data-onto-aesthetics.html"><a href="visualizing-data-mapping-data-onto-aesthetics.html#aesthetics-and-types-of-data"><i class="fa fa-check"></i><b>1.1</b> Aesthetics and types of data</a></li>
<li class="chapter" data-level="1.2" data-path="visualizing-data-mapping-data-onto-aesthetics.html"><a href="visualizing-data-mapping-data-onto-aesthetics.html#scales-map-data-values-onto-aesthetics"><i class="fa fa-check"></i><b>1.2</b> Scales map data values onto aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="coordinate-systems-axes.html"><a href="coordinate-systems-axes.html"><i class="fa fa-check"></i><b>2</b> Coordinate systems and axes</a><ul>
<li class="chapter" data-level="2.1" data-path="coordinate-systems-axes.html"><a href="coordinate-systems-axes.html#cartesian-coordinates"><i class="fa fa-check"></i><b>2.1</b> Cartesian coordinates</a></li>
<li class="chapter" data-level="2.2" data-path="coordinate-systems-axes.html"><a href="coordinate-systems-axes.html#nonlinear-axes"><i class="fa fa-check"></i><b>2.2</b> Nonlinear axes</a></li>
<li class="chapter" data-level="2.3" data-path="coordinate-systems-axes.html"><a href="coordinate-systems-axes.html#coordinate-systems-with-curved-axes"><i class="fa fa-check"></i><b>2.3</b> Coordinate systems with curved axes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="color-basics.html"><a href="color-basics.html"><i class="fa fa-check"></i><b>3</b> Color scales</a><ul>
<li class="chapter" data-level="3.1" data-path="color-basics.html"><a href="color-basics.html#color-as-a-tool-to-distinguish"><i class="fa fa-check"></i><b>3.1</b> Color as a tool to distinguish</a></li>
<li class="chapter" data-level="3.2" data-path="color-basics.html"><a href="color-basics.html#color-to-represent-data-values"><i class="fa fa-check"></i><b>3.2</b> Color to represent data values</a></li>
<li class="chapter" data-level="3.3" data-path="color-basics.html"><a href="color-basics.html#color-as-a-tool-to-highlight"><i class="fa fa-check"></i><b>3.3</b> Color as a tool to highlight</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html"><i class="fa fa-check"></i><b>4</b> Directory of visualizations</a><ul>
<li class="chapter" data-level="4.1" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#proportions"><i class="fa fa-check"></i><b>4.1</b> Proportions</a></li>
<li class="chapter" data-level="4.2" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#individual-distributions"><i class="fa fa-check"></i><b>4.2</b> Individual distributions</a></li>
<li class="chapter" data-level="4.3" data-path="directory-of-visualizations.html"><a href="directory-of-visualizations.html#multiple-distributions"><i class="fa fa-check"></i><b>4.3</b> Multiple distributions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="histograms-density-plots.html"><a href="histograms-density-plots.html"><i class="fa fa-check"></i><b>5</b> Visualizing distributions: Histograms and density plots</a><ul>
<li class="chapter" data-level="5.1" data-path="histograms-density-plots.html"><a href="histograms-density-plots.html#visualizing-a-single-distribution"><i class="fa fa-check"></i><b>5.1</b> Visualizing a single distribution</a></li>
<li class="chapter" data-level="5.2" data-path="histograms-density-plots.html"><a href="histograms-density-plots.html#multiple-histograms-densities"><i class="fa fa-check"></i><b>5.2</b> Visualizing multiple distributions at the same time</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ecdf-qq.html"><a href="ecdf-qq.html"><i class="fa fa-check"></i><b>6</b> Visualizing distributions: Empirical cumulative density functions and q-q plots</a><ul>
<li class="chapter" data-level="6.1" data-path="ecdf-qq.html"><a href="ecdf-qq.html#empirical-cumulative-density-functions"><i class="fa fa-check"></i><b>6.1</b> Empirical cumulative density functions</a></li>
<li class="chapter" data-level="6.2" data-path="ecdf-qq.html"><a href="ecdf-qq.html#skewed-distributions"><i class="fa fa-check"></i><b>6.2</b> Highly skewed distributions</a></li>
<li class="chapter" data-level="6.3" data-path="ecdf-qq.html"><a href="ecdf-qq.html#qq-plots"><i class="fa fa-check"></i><b>6.3</b> Quantile–quantile plots</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="boxplots-violins.html"><a href="boxplots-violins.html"><i class="fa fa-check"></i><b>7</b> Visualizing many distributions at once: boxplots, violins, and ridgeline plots</a><ul>
<li class="chapter" data-level="7.1" data-path="boxplots-violins.html"><a href="boxplots-violins.html#visualizing-distributions-along-the-vertical-axis"><i class="fa fa-check"></i><b>7.1</b> Visualizing distributions along the vertical axis</a></li>
<li class="chapter" data-level="7.2" data-path="boxplots-violins.html"><a href="boxplots-violins.html#visualizing-distributions-along-the-horizontal-axis"><i class="fa fa-check"></i><b>7.2</b> Visualizing distributions along the horizontal axis</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualizing-proportions.html"><a href="visualizing-proportions.html"><i class="fa fa-check"></i><b>8</b> Visualizing proportions</a><ul>
<li class="chapter" data-level="8.1" data-path="visualizing-proportions.html"><a href="visualizing-proportions.html#a-case-for-pie-charts"><i class="fa fa-check"></i><b>8.1</b> A case for pie charts</a></li>
<li class="chapter" data-level="8.2" data-path="visualizing-proportions.html"><a href="visualizing-proportions.html#side-by-side-bars"><i class="fa fa-check"></i><b>8.2</b> A case for side-by-side bars</a></li>
<li class="chapter" data-level="8.3" data-path="visualizing-proportions.html"><a href="visualizing-proportions.html#stacked-densities"><i class="fa fa-check"></i><b>8.3</b> A case for stacked bars and stacked densities</a></li>
<li class="chapter" data-level="8.4" data-path="visualizing-proportions.html"><a href="visualizing-proportions.html#visualizing-proportions-separately-as-parts-of-the-total"><i class="fa fa-check"></i><b>8.4</b> Visualizing proportions separately as parts of the total</a></li>
</ul></li>
<li class="part"><span><b>Part II: Principles of figure design</b></span></li>
<li class="chapter" data-level="9" data-path="small-axis-labels.html"><a href="small-axis-labels.html"><i class="fa fa-check"></i><b>9</b> Your axis labels are too small</a></li>
<li class="chapter" data-level="10" data-path="proportional-ink.html"><a href="proportional-ink.html"><i class="fa fa-check"></i><b>10</b> The principle of proportional ink</a><ul>
<li class="chapter" data-level="10.1" data-path="proportional-ink.html"><a href="proportional-ink.html#visualizations-along-linear-axes"><i class="fa fa-check"></i><b>10.1</b> Visualizations along linear axes</a></li>
<li class="chapter" data-level="10.2" data-path="proportional-ink.html"><a href="proportional-ink.html#visualizations-along-logarithmic-axes"><i class="fa fa-check"></i><b>10.2</b> Visualizations along logarithmic axes</a></li>
<li class="chapter" data-level="10.3" data-path="proportional-ink.html"><a href="proportional-ink.html#direct-area-visualizations"><i class="fa fa-check"></i><b>10.3</b> Direct area visualizations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="overlapping-points.html"><a href="overlapping-points.html"><i class="fa fa-check"></i><b>11</b> Handling overlapping points</a><ul>
<li class="chapter" data-level="11.1" data-path="overlapping-points.html"><a href="overlapping-points.html#partial-transparency-and-jittering"><i class="fa fa-check"></i><b>11.1</b> Partial transparency and jittering</a></li>
<li class="chapter" data-level="11.2" data-path="overlapping-points.html"><a href="overlapping-points.html#d-histograms"><i class="fa fa-check"></i><b>11.2</b> 2d histograms</a></li>
<li class="chapter" data-level="11.3" data-path="overlapping-points.html"><a href="overlapping-points.html#contour-lines"><i class="fa fa-check"></i><b>11.3</b> Contour lines</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="avoid-line-drawings.html"><a href="avoid-line-drawings.html"><i class="fa fa-check"></i><b>12</b> Avoid line drawings</a></li>
<li class="chapter" data-level="13" data-path="color-pitfalls.html"><a href="color-pitfalls.html"><i class="fa fa-check"></i><b>13</b> Common pitfalls of color use</a><ul>
<li class="chapter" data-level="13.1" data-path="color-pitfalls.html"><a href="color-pitfalls.html#encoding-too-much-or-irrelevant-information"><i class="fa fa-check"></i><b>13.1</b> Encoding too much or irrelevant information</a></li>
<li class="chapter" data-level="13.2" data-path="color-pitfalls.html"><a href="color-pitfalls.html#using-non-monotonic-color-scales-to-encode-data-values"><i class="fa fa-check"></i><b>13.2</b> Using non-monotonic color scales to encode data values</a></li>
<li class="chapter" data-level="13.3" data-path="color-pitfalls.html"><a href="color-pitfalls.html#not-designing-for-color-vision-deficiency"><i class="fa fa-check"></i><b>13.3</b> Not designing for color-vision deficiency</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="redundant-coding.html"><a href="redundant-coding.html"><i class="fa fa-check"></i><b>14</b> Redundant coding</a><ul>
<li class="chapter" data-level="14.1" data-path="redundant-coding.html"><a href="redundant-coding.html#designing-legends-with-redundant-coding"><i class="fa fa-check"></i><b>14.1</b> Designing legends with redundant coding</a></li>
<li class="chapter" data-level="14.2" data-path="redundant-coding.html"><a href="redundant-coding.html#designing-figures-without-legends"><i class="fa fa-check"></i><b>14.2</b> Designing figures without legends</a></li>
</ul></li>
<li class="part"><span><b>Part III: Miscellaneous topics</b></span></li>
<li class="chapter" data-level="15" data-path="image-file-formats.html"><a href="image-file-formats.html"><i class="fa fa-check"></i><b>15</b> Understanding the most commonly used image file formats</a><ul>
<li class="chapter" data-level="15.1" data-path="image-file-formats.html"><a href="image-file-formats.html#bitmap-and-vector-graphics"><i class="fa fa-check"></i><b>15.1</b> Bitmap and vector graphics</a></li>
<li class="chapter" data-level="15.2" data-path="image-file-formats.html"><a href="image-file-formats.html#lossless-and-lossy-compression-of-bitmap-graphics"><i class="fa fa-check"></i><b>15.2</b> Lossless and lossy compression of bitmap graphics</a></li>
<li class="chapter" data-level="15.3" data-path="image-file-formats.html"><a href="image-file-formats.html#converting-between-image-formats"><i class="fa fa-check"></i><b>15.3</b> Converting between image formats</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="outline.html"><a href="outline.html"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="outline.html"><a href="outline.html#part-i-from-data-to-visualization"><i class="fa fa-check"></i>Part I: From data to visualization</a></li>
<li class="chapter" data-level="" data-path="outline.html"><a href="outline.html#part-ii-principles-of-figure-design"><i class="fa fa-check"></i>Part II: Principles of figure design</a></li>
<li class="chapter" data-level="" data-path="outline.html"><a href="outline.html#part-iii-miscellaneous-topics"><i class="fa fa-check"></i>Part III: Miscellaneous topics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="technical-notes.html"><a href="technical-notes.html"><i class="fa fa-check"></i>Technical notes</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Fundamentals of data visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="histograms-density-plots" class="section level1">
<h1><span class="header-section-number">5</span> Visualizing distributions: Histograms and density plots</h1>
<p>We frequently encounter the situation where we would like to understand how a particular variable is distributed in a dataset. To give a concrete example, consider the passengers of the ship Titanic, which sank on April 15, 2012. There were approximately 1317 passengers on the Titanic (not counting crew), and we have reported ages for 756 of them. We might want to know how many passengers of what ages there were on the Titanic, i.e., how many children, young adults, middle-aged people, seniors, and so on. We call the relative proportions of different ages among the passengers the <em>age distribution</em> of the passengers.</p>
<div id="visualizing-a-single-distribution" class="section level2">
<h2><span class="header-section-number">5.1</span> Visualizing a single distribution</h2>
<p>We can obtain a sense of the age distribution among the passengers by grouping all passengers into bins with comparable ages and then counting the number of passengers in each bin. This procedure results in a table such as Table <a href="histograms-density-plots.html#tab:titanic-ages">5.1</a>.</p>
<table class="kable_wrapper">
<caption>
<span id="tab:titanic-ages">Table 5.1: </span>Numbers of passenger with known age on the Titanic.
</caption>
<tbody>
<tr>
<td>
<table>
<thead>
<tr class="header">
<th align="left">Age range</th>
<th align="right">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0–5</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="left">6–10</td>
<td align="right">19</td>
</tr>
<tr class="odd">
<td align="left">11–15</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">16–20</td>
<td align="right">99</td>
</tr>
<tr class="odd">
<td align="left">21–25</td>
<td align="right">139</td>
</tr>
<tr class="even">
<td align="left">26–30</td>
<td align="right">121</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr class="header">
<th align="left">Age range</th>
<th align="right">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">31–35</td>
<td align="right">76</td>
</tr>
<tr class="even">
<td align="left">36–40</td>
<td align="right">74</td>
</tr>
<tr class="odd">
<td align="left">41–45</td>
<td align="right">54</td>
</tr>
<tr class="even">
<td align="left">46–50</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">51–55</td>
<td align="right">26</td>
</tr>
<tr class="even">
<td align="left">56–60</td>
<td align="right">22</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr class="header">
<th align="left">Age range</th>
<th align="right">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">61–65</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">66–70</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">71–75</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>We can visualize this table by drawing filled rectangles whose heights correspond to the counts and whose widths correspond to the width of the age bins (Figure <a href="histograms-density-plots.html#fig:titanic-ages-hist1">5.1</a>). Such a visualization is called a histogram.</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-ages-hist1"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-ages-hist1-1.png" alt="Histogram of the ages of Titanic passengers." width="576" />
<p class="caption">
Figure 5.1: Histogram of the ages of Titanic passengers.
</p>
</div>
<p>Because histograms are generated by binning the data, their exact visual appearance depends on the choice of the bin width. Most visualization programs that generate histograms will choose a bin width by default, but chances are that bin width is not the most appropriate one for any histogram you may want to make. It is therefore critical to always try different bin widths to verify that the resulting histogram reflects the underlying data accurately. In general, if the bin width is too small, then the histogram becomes overly peaky and visually busy and the main trends in the data may be obscured. On the other hand, if the bin width is too large, then smaller features in the distribution of the data may disappear.</p>
<p>For the age distribution of Titanic passengers, we can see that a bin width of one year is too small and a bin width of fifteen years is too large, whereas bin widths between three to five years work fine (Figure <a href="histograms-density-plots.html#fig:titanic-ages-hist-grid">5.2</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-ages-hist-grid"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-ages-hist-grid-1.png" alt="Histograms depend on the chosen bin width. Here, the same age distribution of Titanic passengers is shown with four different bin widths: (a) one year; (b) three years; (c) five years; (d) fifteen years." width="816" />
<p class="caption">
Figure 5.2: Histograms depend on the chosen bin width. Here, the same age distribution of Titanic passengers is shown with four different bin widths: (a) one year; (b) three years; (c) five years; (d) fifteen years.
</p>
</div>
<div class="rmdtip">
<p>
When making a histogram, always explore multiple bin widths.
</p>
</div>
<p>Histograms have been a popular visualization option since at least the 18th century, in part because they are easily generated by hand. More recently, as extensive computing power has become available in everyday devices such as laptops and cell phones, we see them increasingly being replaced by density plots. In a density plot, we attempt to visualize the underlying probability distribution of the data by drawing an appropriate continuous curve (Figure <a href="histograms-density-plots.html#fig:titanic-ages-dens1">5.3</a>). This curve needs to be estimated from the data, and the most commonly used method for this estimation procedure is called <em>kernel density estimation.</em> In kernel density estimation, we draw a continuous curve (the kernel) with a small width (controlled by a parameter called <em>bandwidth</em>) at the location of each data point, and then we add up all these curves to obtain the final density estimate. The most widely used kernel is a Gaussian kernel (i.e., a Gaussian bell curve), but there are many other choices.</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-ages-dens1"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-ages-dens1-1.png" alt="Kernel density estimate of the age distribution of passengers on the Titanic. The height of the curve is scaled such that the area under the curve equals one. The density estimate was performed with a Gaussian kernel and a bandwidth of 2." width="576" />
<p class="caption">
Figure 5.3: Kernel density estimate of the age distribution of passengers on the Titanic. The height of the curve is scaled such that the area under the curve equals one. The density estimate was performed with a Gaussian kernel and a bandwidth of 2.
</p>
</div>
<p>Just as is the case with histograms, the exact visual appearance of a density plot depends on the kernel and bandwidth choices (Figure <a href="histograms-density-plots.html#fig:titanic-ages-dens-grid">5.4</a>). The bandwidth parameter behaves similarly to the bin width in histograms. If the bandwidth is too small, then the density estimate can become overly peaky and visually busy and the main trends in the data may be obscured. On the other hand, if the bandwidth is too large, then smaller features in the distribution of the data may disappear. In addition, the choice of the kernel affects the shape of the density curve. For example, a Gaussian kernel will have a tendency to produce density estimates that look Gaussian-like, with smooth features and tails. By contrast, a rectangular kernel can generate the appearance of steps in the density curve (Figure <a href="histograms-density-plots.html#fig:titanic-ages-dens-grid">5.4</a>d). In general, the more data points there are in the data set, the less the choice of the kernel matters. Therefore, density plots tend to be quite reliable and informative for large data sets but can be misleading for data sets of only a few points.</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-ages-dens-grid"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-ages-dens-grid-1.png" alt="Kernel density estimates depend on the chosen kernel and bandwidth. Here, the same age distribution of Titanic passengers is shown for four different combinations of these parameters: (a) Gaussian kernel, bandwidth = 0.5; (b) Gaussian kernel, bandwidth = 2; (c) Gaussian kernel, bandwidth = 5; (d) Rectangular kernel, bandwidth = 2." width="816" />
<p class="caption">
Figure 5.4: Kernel density estimates depend on the chosen kernel and bandwidth. Here, the same age distribution of Titanic passengers is shown for four different combinations of these parameters: (a) Gaussian kernel, bandwidth = 0.5; (b) Gaussian kernel, bandwidth = 2; (c) Gaussian kernel, bandwidth = 5; (d) Rectangular kernel, bandwidth = 2.
</p>
</div>
<p>Density curves are usually scaled such that the area under the curve equals one. This convention can make the <em>y</em> axis scale confusing, because it depends on the units of the <em>x</em> axis. For example, in the case of the age distribution, the data range on the <em>x</em> axis goes from 0 to approximately 75. Therefore, we expect the mean height of the density curve to be 1/75 = 0.013. Indeed, when looking at the age density curves (e.g., Figure <a href="histograms-density-plots.html#fig:titanic-ages-dens-grid">5.4</a>), we see that the <em>y</em> values range from 0 to approximately 0.04, with an average of somewhere close to 0.01.</p>
<p>Kernel density estimates have one pitfall that we need to be aware of: They have a tendency to produce the appearance of data where none exists, in particular in the tails. As a consequence, careless use of density estimates can easily lead to figures that make nonsensical statements. For example, if we don’t pay attention, we might generate a visualization of an age distribution that includes negative ages (Figure <a href="histograms-density-plots.html#fig:titanic-ages-dens-negative">5.5</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-ages-dens-negative"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-ages-dens-negative-1.png" alt="Kernel density estimates can extend the tails of the distribution into areas where no data exist and no data are even possible. Here, the density estimate has been allowed to extend into the negative age range. This is clearly nonsensical and should be avoided." width="576" />
<p class="caption">
Figure 5.5: Kernel density estimates can extend the tails of the distribution into areas where no data exist and no data are even possible. Here, the density estimate has been allowed to extend into the negative age range. This is clearly nonsensical and should be avoided.
</p>
</div>
<div class="rmdtip">
<p>
Always verify that your density estimate does not predict the existence of nonsensical data values.
</p>
</div>
<p>So should you use a histogram or a density plot to visualize a distribution? Heated discussions can be had on this topic. Some people are vehemently against density plots and believe that they are arbitrary and misleading. Others realize that histograms can be just as arbitrary and misleading. I think the choice is largely a matter of taste, but sometimes one or the other option may more accurately reflect the specific features of interest in the data at hand. There is also the possibility of using neither and instead choosing empirical cumulative density functions or q-q plots (Chapter <a href="ecdf-qq.html#ecdf-qq">6</a>). Finally, I believe that density estimates have an inherent advantage over histograms as soon as we want to visualize more than one distribution at a time (see next section).</p>
</div>
<div id="multiple-histograms-densities" class="section level2">
<h2><span class="header-section-number">5.2</span> Visualizing multiple distributions at the same time</h2>
<p>In many scenarios we have multiple distributions we would like to visualize simultaneously. For example, let’s say we’d like to see how the ages of Titanic passengers are distributed between men and women. Were men and women passengers generally of the same age, or was there an age difference between the genders? One commonly employed visualization strategy in this case is a stacked histogram, where we draw the histogram bars for women on top of the bars for men, in a different color (Figure <a href="histograms-density-plots.html#fig:titanic-age-stacked-hist">5.6</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-age-stacked-hist"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-age-stacked-hist-1.png" alt="Histogram of the ages of Titanic passengers stratified by gender." width="576" />
<p class="caption">
Figure 5.6: Histogram of the ages of Titanic passengers stratified by gender.
</p>
</div>
<p>In my opinion, this type of visualization should be avoided. There are two key problems here: First, from just looking at the figure, it is never entirely clear where exactly the bars begin. Do they start where the color changes or are they meant to start at zero? In other words, are there about 25 females of age 18–20 or are there almost 80? (The former is the case.) Second, the bar heights for the female counts cannot be directly compared to each other, because the bars all start at a different height. For example, the men were on average older than the women, and this fact is not at all visible in Figure <a href="histograms-density-plots.html#fig:titanic-age-stacked-hist">5.6</a>.</p>
<p>We could try to address these problems by having all bars start at zero and making the bars partially transparent (Figure <a href="histograms-density-plots.html#fig:titanic-age-overlapping-hist">5.7</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-age-overlapping-hist"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-age-overlapping-hist-1.png" alt="Age distributions of male and female Titanic passengers, shown as two overlapping histograms." width="576" />
<p class="caption">
Figure 5.7: Age distributions of male and female Titanic passengers, shown as two overlapping histograms.
</p>
</div>
<p>However, this approach generates new problems. Now it appears that there are actually three different groups, not just two, and we’re still not entirely sure where each bar starts and ends. Overlapping histograms don’t work well because a semi-transparent bar drawn on top of another tends to not look like a semi-transparent bar but instead like a bar drawn in a different color.</p>
<p>Overlapping density plots don’t typically have the problem that overlapping histograms have, because the continuous density lines help the eye keep the distributions separate. However, for this particular dataset, the age distributions for male and female passengers are nearly identical up to around age 17 and then diverge, so that the resulting visualization is still not ideal (Figure <a href="histograms-density-plots.html#fig:titanic-age-overlapping-dens">5.8</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-age-overlapping-dens"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-age-overlapping-dens-1.png" alt="Density estimates of the ages of male and female Titanic passengers. To highlight that there were more male than female passengers, the density curves were scaled such that the area under each curve corresponds to the total number of male and female passengers with known age (468 and 288, respectively)." width="576" />
<p class="caption">
Figure 5.8: Density estimates of the ages of male and female Titanic passengers. To highlight that there were more male than female passengers, the density curves were scaled such that the area under each curve corresponds to the total number of male and female passengers with known age (468 and 288, respectively).
</p>
</div>
<p>A solution that works well for this dataset is to show the age distributions of male and female passengers separately, each as a proportion of the overall age distribution (Figure <a href="histograms-density-plots.html#fig:titanic-age-fractional-dens">5.9</a>). This visualization shows intuitively and clearly that there were many fewer women than men in the 20–50-year age range on the Titanic.</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-age-fractional-dens"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-age-fractional-dens-1.png" alt="Age distributions of male and female Titanic passengers, shown as proportion of the passenger total. The colored areas show the density estimates of the ages of male and female passengers, respectively, and the gray areas show the overall passenger age distribution." width="816" />
<p class="caption">
Figure 5.9: Age distributions of male and female Titanic passengers, shown as proportion of the passenger total. The colored areas show the density estimates of the ages of male and female passengers, respectively, and the gray areas show the overall passenger age distribution.
</p>
</div>
<p>Finally, when we want to visualize exactly two distributions, we can also make two separate histograms, rotate them by 90 degrees, and have the bars in one histogram point into the opposite direction of the other. This trick is commonly employed when visualizing age distributions, and the resulting plot is usually called an <em>age pyramid</em> (Figure <a href="histograms-density-plots.html#fig:titanic-age-pyramid">5.10</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:titanic-age-pyramid"></span>
<img src="visualizing_distributions_I_files/figure-html4/titanic-age-pyramid-1.png" alt="The age distributions of male and female Titanic passengers visualized as an age pyramid." width="576" />
<p class="caption">
Figure 5.10: The age distributions of male and female Titanic passengers visualized as an age pyramid.
</p>
</div>
<p>Importantly, this trick does not work when there are more than two distributions we want to visualize at the same time. For example, to visualize the length distributions of sepals for three different iris species, density plots are by far the best choice (Figure <a href="histograms-density-plots.html#fig:iris-densities">5.11</a>).</p>

<div class="figure" style="text-align: center"><span id="fig:iris-densities"></span>
<img src="visualizing_distributions_I_files/figure-html4/iris-densities-1.png" alt="Density estimates of the sepal lengths of three different iris species." width="576" />
<p class="caption">
Figure 5.11: Density estimates of the sepal lengths of three different iris species.
</p>
</div>
<div class="rmdtip">
<p>
To visualize several distributions at once, kernel density plots will generally work better than histograms.
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="directory-of-visualizations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ecdf-qq.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
